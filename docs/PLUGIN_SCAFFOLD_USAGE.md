# ToolCat 插件脚手架工具

这个工具包提供了一个快速生成ToolCat插件代码的脚手架，帮助开发者快速创建符合规范的插件项目结构。

## 功能特性

- 交互式命令行界面，引导用户输入插件信息
- 自动生成符合Plugin接口规范的插件代码
- 支持自定义插件名称、标识符、描述和版本
- 自动生成插件文档（README.md）
- 自动检测项目结构，将生成的文件放置到正确位置

## 使用方法

### 编译运行（所有平台）

1. 确保已安装Go语言环境（版本1.16或更高）
2. 打开终端，根目录下
3. 运行以下命令编译代码：
   ```bash
   go build -o plugin_scaffold.exe tools/plugin_scaffold.go
   ```
4. 运行编译后的程序：
   ```bash
   # Windows
   plugin_scaffold.exe
   
   # Linux/Mac
   ./plugin_scaffold
   ```
5. 按照命令行提示输入插件信息

## 交互式配置选项

运行工具后，您需要输入以下信息：

1. **插件名称**：必须使用驼峰式命名并以Plugin结尾（如`TodoPlugin`）
2. **插件标识符**：必须使用小写字母和下划线（默认会根据插件名称自动生成）
3. **插件描述**：简要描述插件的功能和用途
4. **插件版本**：遵循语义化版本规范（默认：`1.0.0`）

## 生成的文件

工具会生成以下文件：

1. **插件代码文件**：`plugins/{plugin_name}_plugin.go`
   - 包含完整的Plugin接口实现
   - 预设了基本的路由和处理函数示例
   - 包含辅助方法的示例实现

2. **插件文档文件**：`plugins/{plugin_name}_plugin.md`
   - 包含插件基本信息
   - 列出所有API接口及其说明
   - 提供配置说明和使用示例

## 生成的插件结构

生成的插件代码包含以下主要部分：

- **插件结构体**：用于存储插件状态和依赖
- **基础信息方法**：`Name()`, `Description()`, `Version()`
- **生命周期方法**：`Init()`, `Shutdown()`
- **路由定义方法**：`GetRoutes()`, `RegisterRoutes()`（兼容旧版）
- **中间件方法**：`GetDefaultMiddlewares()`
- **执行方法**：`Execute()`
- **辅助方法**：示例业务逻辑实现

## 后续操作

生成插件代码后，您需要：

1. 编辑生成的插件文件，实现具体的业务逻辑
2. 在`main.go`中注册您的插件
3. 根据需要添加更多路由和功能
4. 测试插件功能
5. 更新插件文档

## 插件注册示例

在`main.go`文件中，您需要添加以下代码来注册您的插件：

```go
import (
	"toolcat/plugins"
)

func registerPlugins() {
	// 注册您的插件
	plugins.PluginManager.Register(plugins.{pluginInstance})
}
```

其中`{pluginInstance}`是生成的插件实例变量名，通常是插件名称的首字母小写形式。

## 注意事项

- 插件名称必须遵循驼峰式命名规范并以Plugin结尾
- 插件标识符必须只包含小写字母和下划线
- 生成的代码是一个模板，需要根据实际需求进行修改和扩展
- 请确保在注册插件前已完成所有必要的初始化操作
- 如果有特殊的中间件需求，请实现`GetDefaultMiddlewares()`方法

## 常见问题

### Q: 为什么找不到plugins目录？
**A:** 如果工具无法自动找到plugins目录，请确保您在正确的项目结构中运行工具，或者手动将生成的文件移动到项目的plugins目录。

### Q: 生成的插件无法编译？
**A:** 请检查是否正确安装了Go语言环境，以及是否安装了所有必要的依赖包。

### Q: 如何自定义插件的中间件？
**A:** 编辑生成的插件文件，实现`GetDefaultMiddlewares()`方法，添加您需要的中间件函数。

## 扩展建议

- 根据实际需求添加数据库模型和操作
- 实现更复杂的业务逻辑和API接口
- 添加缓存机制提高性能
- 实现插件配置管理功能
- 添加单元测试和集成测试

## 版本历史

- **1.0.0**：初始版本，提供基本的插件代码生成功能